# java 常见的序列化和反序列化工具效率对比

**序列化与反序列化**

序列化 (Serialization)是将对象的状态信息转换为可以存储或传输的形式的过程。一般将一个对象存储至一个储存媒介，例如档案或是记亿体缓冲等。在网络传输过程中，可以是字节或是XML等格式。而字节的或XML编码格式可以还原完全相等的对象。这个相反的过程又称为反序列化。

**Java对象的序列化与反序列化**

在Java中，我们可以通过多种方式来创建对象，并且只要对象没有被回收我们都可以复用该对象。但是，我们创建出来的这些Java对象都是存在于JVM的堆内存中的。只有JVM处于运行状态的时候，这些对象才可能存在。一旦JVM停止运行，这些对象的状态也就随之而丢失了。

但是在真实的应用场景中，我们需要将这些对象持久化下来，并且能够在需要的时候把对象重新读取出来。Java的对象序列化可以帮助我们实现该功能。

对象序列化机制（object serialization）是Java语言内建的一种对象持久化方式，通过对象序列化，可以把对象的状态保存为字节数组，并且可以在有需要的时候将这个字节数组通过反序列化的方式再转换成对象。对象序列化可以很容易的在JVM中的活动对象和字节数组（流）之间进行转换。

在Java中，对象的序列化与反序列化被广泛应用到RMI(远程方法调用)及网络传输中。

**相关接口及类**

Java为了方便开发人员将Java对象进行序列化及反序列化提供了一套方便的API来支持。其中包括以下接口和类：

* java.io.Serializable

* java.io.Externalizable

* ObjectOutput

* ObjectInput

* ObjectOutputStream

* ObjectInputStream

**Serializable 接口**

类通过实现 java.io.Serializable 接口以启用其序列化功能。未实现此接口的类将无法使其任何状态序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于标识可序列化的语义。 (该接口并没有方法和字段，为什么只有实现了该接口的类的对象才能被序列化呢？)

当试图对一个对象进行序列化的时候，如果遇到不支持 Serializable 接口的对象。在此情况下，将抛出NotSerializableException。

如果要序列化的类有父类，要想同时将在父类中定义过的变量持久化下来，那么父类也应该集成java.io.Serializable接口。

## 环境

```$xslt
系统：Windows 10 10.0_x64
内存：16G
CPU：I7-7700K
开发工具：IntelliJ IDEA 2019.1
maven：Apache Maven 3.6.0
java：jdk_1.8.0_201
springboot：2.0.8
jackson：2.9.8
gson：2.8.5
json-lib：2.4
fastjson：1.2.47
```


测试了单个对象序列化为字符串和多个对象序列化成字符型和单个json字符串反序列化为对象和json数组反序列化为对象列表

## fastjson


| 序列化框架    | 对象数量    | 序列化(毫秒) | 反序列化(毫秒) |
|----------|---------|---------|----------|
| fastjson | 1       | 418     | 11       |
| fastjson | 10      | 388     | 21       |
| fastjson | 100     | 430     | 16       |
| fastjson | 1000    | 403     | 26       |
| fastjson | 10000   | 503     | 48       |
| fastjson | 100000  | 961     | 115      |
| fastjson | 1000000 | 4642    | 309      |

## gson

| 序列化框架 | 对象数量    | 序列化(毫秒) | 反序列化(毫秒) |
|-------|---------|---------|----------|
| gson  | 1       | 305     | 2        |
| gson  | 10      | 329     | 7        |
| gson  | 100     | 314     | 27       |
| gson  | 1000    | 360     | 97       |
| gson  | 10000   | 487     | 442      |
| gson  | 100000  | 1281    | 1311     |
| gson  | 1000000 | 6663    | 8728     |

## jackson

| 序列化框架   | 对象数量    | 序列化(毫秒) | 反序列化(毫秒) |
|---------|---------|---------|----------|
| jackson | 1       | 340     | 28       |
| jackson | 10      | 339     | 23       |
| jackson | 100     | 349     | 36       |
| jackson | 1000    | 360     | 97       |
| jackson | 10000   | 362     | 45       |
| jackson | 100000  | 777     | 182      |
| jackson | 1000000 | 3988    | 870      |

## jsonlib

| 序列化框架   | 对象数量    | 序列化(毫秒) | 反序列化(毫秒) |
|---------|---------|---------|----------|
| jsonlib | 1       | 473     | 8        |
| jsonlib | 10      | 471     | 12       |
| jsonlib | 100     | 468     | 42       |
| jsonlib | 1000    | 525     | 182      |
| jsonlib | 10000   | 833     | 866      |
| jsonlib | 100000  | 1763    | 3143     |
| jsonlib | 1000000 | 17478   | 27414    |


## java 自带的序列化工具

| 序列化框架 | 对象数量    | 序列化(毫秒) | 反序列化(毫秒) |
|-------|---------|---------|----------|
| java  | 1       | 315     | 29       |
| java  | 10      | 312     | 33       |
| java  | 100     | 317     | 39       |
| java  | 1000    | 360     | 98       |
| java  | 10000   | 603     | 665      |
| java  | 100000  | 2863    | 4743     |
| java  | 1000000 | 22695   | 47139    |


## hessian 序列化工具

| 序列化框架 | 对象数量    | 序列化(毫秒) | 反序列化(毫秒) |
|-------|---------|---------|----------|
| java  | 1       | 44      | 5        |
| java  | 10      | 49      | 6        |
| java  | 100     | 57      | 8        |
| java  | 1000    | 55      | 20       |
| java  | 10000   | 100     | 91       |
| java  | 100000  | 527     | 638      |
| java  | 1000000 | 5702    | 2135     |